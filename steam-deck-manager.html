<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Deck Manager - Retrowave Edition</title>
    <link rel="stylesheet" href="retrowave-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', 'Courier New', monospace;
        }
        .script-card {
            margin: 15px 0;
        }
        .script-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-running {
            background: var(--neon-green);
            color: #000;
        }
        .status-stopped {
            background: var(--neon-pink);
            color: #fff;
        }
        .status-error {
            background: var(--neon-orange);
            color: #000;
        }
        .system-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .info-card {
            background: var(--darker-bg);
            border: 1px solid var(--neon-cyan);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .info-value {
            font-size: 1.5rem;
            color: var(--neon-cyan);
            text-shadow: 0 0 10px var(--neon-cyan);
        }
        .info-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .log-container {
            background: var(--darker-bg);
            border: 1px solid var(--neon-cyan);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .log-entry {
            margin: 2px 0;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .log-info { color: var(--neon-cyan); }
        .log-success { color: var(--neon-green); }
        .log-warning { color: var(--neon-orange); }
        .log-error { color: var(--neon-pink); }
        .progress-container {
            margin: 10px 0;
        }
        .script-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="fade-in-up">STEAM DECK MANAGER</h1>
        <p class="text-center text-neon fade-in-up">Управление скриптами и настройками Steam Deck в стиле Retrowave</p>
        
        <!-- Системная информация -->
        <div class="demo-section">
            <h2 class="demo-title slide-in-left">Системная информация</h2>
            <div class="system-info">
                <div class="info-card">
                    <div class="info-value" id="cpu-usage">--</div>
                    <div class="info-label">Загрузка CPU</div>
                </div>
                <div class="info-card">
                    <div class="info-value" id="memory-usage">--</div>
                    <div class="info-label">Использование RAM</div>
                </div>
                <div class="info-card">
                    <div class="info-value" id="disk-usage">--</div>
                    <div class="info-label">Использование диска</div>
                </div>
                <div class="info-card">
                    <div class="info-value" id="temperature">--</div>
                    <div class="info-label">Температура</div>
                </div>
            </div>
        </div>

        <!-- Управление скриптами -->
        <div class="demo-section">
            <h2 class="demo-title slide-in-right">Управление скриптами</h2>
            
            <!-- SSH Management -->
            <div class="card script-card">
                <h3 class="text-pink">SSH Управление</h3>
                <p class="script-description">Включение и настройка SSH для удаленного доступа</p>
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <button class="btn" onclick="enableSSH()">Включить SSH</button>
                    <button class="btn" onclick="disableSSH()">Отключить SSH</button>
                    <button class="btn" onclick="checkSSHStatus()">Проверить статус</button>
                </div>
                <div class="script-status" id="ssh-status">Неизвестно</div>
            </div>

            <!-- Game Management -->
            <div class="card script-card">
                <h3 class="text-purple">Управление играми</h3>
                <p class="script-description">Сохранение и восстановление игр и сохранений</p>
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <button class="btn" onclick="saveGames()">Сохранить игры</button>
                    <button class="btn" onclick="restoreGames()">Восстановить игры</button>
                    <button class="btn" onclick="checkGamesStatus()">Проверить статус</button>
                </div>
                <div class="script-status" id="games-status">Неизвестно</div>
            </div>

            <!-- Library Management -->
            <div class="card script-card">
                <h3 class="text-neon">Управление библиотеками</h3>
                <p class="script-description">Добавление внешних библиотек Steam</p>
                <div class="form-group">
                    <label class="text-pink">Путь к библиотеке:</label>
                    <input type="text" id="library-path" class="form-control" placeholder="/path/to/steam/library">
                </div>
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <button class="btn" onclick="addLibrary()">Добавить библиотеку</button>
                    <button class="btn" onclick="listLibraries()">Список библиотек</button>
                </div>
                <div class="script-status" id="library-status">Неизвестно</div>
            </div>

            <!-- GPU Management -->
            <div class="card script-card">
                <h3 class="text-green">GPU Управление</h3>
                <p class="script-description">Настройка внешней GPU и рендеринга</p>
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <button class="btn" onclick="enableExternalGPU()">Включить внешнюю GPU</button>
                    <button class="btn" onclick="disableExternalGPU()">Отключить внешнюю GPU</button>
                    <button class="btn" onclick="checkGPUStatus()">Проверить GPU</button>
                </div>
                <div class="script-status" id="gpu-status">Неизвестно</div>
            </div>

            <!-- Mode Switching -->
            <div class="card script-card">
                <h3 class="text-orange">Переключение режимов</h3>
                <p class="script-description">Переключение между игровым и рабочим столом</p>
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <button class="btn" onclick="switchToGameMode()">Игровой режим</button>
                    <button class="btn" onclick="switchToDesktop()">Рабочий стол</button>
                    <button class="btn" onclick="checkCurrentMode()">Текущий режим</button>
                </div>
                <div class="script-status" id="mode-status">Неизвестно</div>
            </div>
        </div>

        <!-- Логи и мониторинг -->
        <div class="demo-section">
            <h2 class="demo-title slide-in-left">Логи и мониторинг</h2>
            <div class="card">
                <h3 class="text-cyan">Системные логи</h3>
                <div class="log-container" id="log-container">
                    <div class="log-entry log-info">[INFO] Steam Deck Manager запущен</div>
                    <div class="log-entry log-success">[SUCCESS] Retrowave тема загружена</div>
                </div>
                <div style="margin-top: 15px;">
                    <button class="btn" onclick="clearLogs()">Очистить логи</button>
                    <button class="btn" onclick="exportLogs()">Экспорт логов</button>
                </div>
            </div>
        </div>

        <!-- Настройки -->
        <div class="demo-section">
            <h2 class="demo-title slide-in-right">Настройки</h2>
            <div class="card">
                <h3 class="text-purple">Конфигурация</h3>
                <div class="form-group">
                    <label class="text-neon">Автообновление статуса (сек):</label>
                    <input type="number" id="update-interval" class="form-control" value="5" min="1" max="60">
                </div>
                <div class="form-group">
                    <label class="text-pink">Включить звуковые эффекты:</label>
                    <input type="checkbox" id="sound-effects" checked>
                </div>
                <div class="form-group">
                    <label class="text-green">Включить анимации:</label>
                    <input type="checkbox" id="animations" checked>
                </div>
                <button class="btn" onclick="saveSettings()">Сохранить настройки</button>
            </div>
        </div>

        <footer class="text-center" style="margin-top: 60px; padding: 40px 0; border-top: 2px solid var(--neon-cyan);">
            <p class="text-neon">Steam Deck Manager - Retrowave Edition</p>
            <p>Управление вашим Steam Deck в стиле 80-х</p>
        </footer>
    </div>

    <script src="retrowave-effects.js"></script>
    <script>
        // Steam Deck Manager JavaScript
        class SteamDeckManager {
            constructor() {
                this.settings = this.loadSettings();
                this.updateInterval = null;
                this.init();
            }

            init() {
                this.startStatusUpdates();
                this.setupEventListeners();
                this.log('Steam Deck Manager инициализирован', 'info');
            }

            loadSettings() {
                const defaultSettings = {
                    updateInterval: 5,
                    soundEffects: true,
                    animations: true
                };
                
                const saved = localStorage.getItem('steamDeckSettings');
                return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;
            }

            saveSettings() {
                const settings = {
                    updateInterval: parseInt(document.getElementById('update-interval').value),
                    soundEffects: document.getElementById('sound-effects').checked,
                    animations: document.getElementById('animations').checked
                };
                
                localStorage.setItem('steamDeckSettings', JSON.stringify(settings));
                this.settings = settings;
                this.log('Настройки сохранены', 'success');
            }

            setupEventListeners() {
                // Настройка полей настроек
                document.getElementById('update-interval').value = this.settings.updateInterval;
                document.getElementById('sound-effects').checked = this.settings.soundEffects;
                document.getElementById('animations').checked = this.settings.animations;
            }

            startStatusUpdates() {
                if (this.updateInterval) {
                    clearInterval(this.updateInterval);
                }
                
                this.updateInterval = setInterval(() => {
                    this.updateSystemInfo();
                }, this.settings.updateInterval * 1000);
            }

            updateSystemInfo() {
                // Симуляция обновления системной информации
                // В реальном приложении здесь будут вызовы к API Steam Deck
                this.updateCPUUsage();
                this.updateMemoryUsage();
                this.updateDiskUsage();
                this.updateTemperature();
            }

            updateCPUUsage() {
                const cpuUsage = Math.floor(Math.random() * 100);
                document.getElementById('cpu-usage').textContent = cpuUsage + '%';
            }

            updateMemoryUsage() {
                const memoryUsage = Math.floor(Math.random() * 100);
                document.getElementById('memory-usage').textContent = memoryUsage + '%';
            }

            updateDiskUsage() {
                const diskUsage = Math.floor(Math.random() * 100);
                document.getElementById('disk-usage').textContent = diskUsage + '%';
            }

            updateTemperature() {
                const temperature = Math.floor(Math.random() * 20) + 60;
                document.getElementById('temperature').textContent = temperature + '°C';
            }

            log(message, type = 'info') {
                const logContainer = document.getElementById('log-container');
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry log-${type}`;
                logEntry.textContent = `[${timestamp}] [${type.toUpperCase()}] ${message}`;
                
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }

            // SSH Management
            enableSSH() {
                this.log('Включение SSH...', 'info');
                this.updateStatus('ssh-status', 'running');
                // Здесь будет реальный вызов скрипта
                setTimeout(() => {
                    this.log('SSH успешно включен', 'success');
                }, 2000);
            }

            disableSSH() {
                this.log('Отключение SSH...', 'info');
                this.updateStatus('ssh-status', 'stopped');
                setTimeout(() => {
                    this.log('SSH отключен', 'success');
                }, 1000);
            }

            checkSSHStatus() {
                this.log('Проверка статуса SSH...', 'info');
                // Симуляция проверки
                const isRunning = Math.random() > 0.5;
                this.updateStatus('ssh-status', isRunning ? 'running' : 'stopped');
            }

            // Game Management
            saveGames() {
                this.log('Сохранение игр...', 'info');
                this.updateStatus('games-status', 'running');
                setTimeout(() => {
                    this.log('Игры успешно сохранены', 'success');
                    this.updateStatus('games-status', 'stopped');
                }, 3000);
            }

            restoreGames() {
                this.log('Восстановление игр...', 'info');
                this.updateStatus('games-status', 'running');
                setTimeout(() => {
                    this.log('Игры успешно восстановлены', 'success');
                    this.updateStatus('games-status', 'stopped');
                }, 3000);
            }

            checkGamesStatus() {
                this.log('Проверка статуса игр...', 'info');
                const hasGames = Math.random() > 0.3;
                this.updateStatus('games-status', hasGames ? 'running' : 'stopped');
            }

            // Library Management
            addLibrary() {
                const path = document.getElementById('library-path').value;
                if (!path) {
                    this.log('Ошибка: путь к библиотеке не указан', 'error');
                    return;
                }
                
                this.log(`Добавление библиотеки: ${path}`, 'info');
                this.updateStatus('library-status', 'running');
                setTimeout(() => {
                    this.log('Библиотека успешно добавлена', 'success');
                    this.updateStatus('library-status', 'stopped');
                }, 2000);
            }

            listLibraries() {
                this.log('Получение списка библиотек...', 'info');
                // Симуляция получения списка
                const libraries = ['/home/deck/games/steam', '/mnt/sdcard/steam'];
                libraries.forEach(lib => {
                    this.log(`Библиотека: ${lib}`, 'info');
                });
            }

            // GPU Management
            enableExternalGPU() {
                this.log('Включение внешней GPU...', 'info');
                this.updateStatus('gpu-status', 'running');
                setTimeout(() => {
                    this.log('Внешняя GPU включена', 'success');
                }, 2000);
            }

            disableExternalGPU() {
                this.log('Отключение внешней GPU...', 'info');
                this.updateStatus('gpu-status', 'stopped');
                setTimeout(() => {
                    this.log('Внешняя GPU отключена', 'success');
                }, 1000);
            }

            checkGPUStatus() {
                this.log('Проверка статуса GPU...', 'info');
                const hasGPU = Math.random() > 0.4;
                this.updateStatus('gpu-status', hasGPU ? 'running' : 'stopped');
            }

            // Mode Switching
            switchToGameMode() {
                this.log('Переключение в игровой режим...', 'info');
                this.updateStatus('mode-status', 'running');
                setTimeout(() => {
                    this.log('Переключено в игровой режим', 'success');
                    this.updateStatus('mode-status', 'stopped');
                }, 1500);
            }

            switchToDesktop() {
                this.log('Переключение в рабочий стол...', 'info');
                this.updateStatus('mode-status', 'running');
                setTimeout(() => {
                    this.log('Переключено в рабочий стол', 'success');
                    this.updateStatus('mode-status', 'stopped');
                }, 1500);
            }

            checkCurrentMode() {
                this.log('Проверка текущего режима...', 'info');
                const isGameMode = Math.random() > 0.5;
                this.updateStatus('mode-status', isGameMode ? 'running' : 'stopped');
            }

            updateStatus(elementId, status) {
                const element = document.getElementById(elementId);
                element.className = `script-status status-${status}`;
                element.textContent = status === 'running' ? 'Активен' : 
                                    status === 'stopped' ? 'Остановлен' : 'Ошибка';
            }

            clearLogs() {
                document.getElementById('log-container').innerHTML = '';
                this.log('Логи очищены', 'info');
            }

            exportLogs() {
                const logs = document.getElementById('log-container').textContent;
                const blob = new Blob([logs], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'steam-deck-logs.txt';
                a.click();
                URL.revokeObjectURL(url);
                this.log('Логи экспортированы', 'success');
            }
        }

        // Глобальные функции для кнопок
        let manager;

        function enableSSH() { manager.enableSSH(); }
        function disableSSH() { manager.disableSSH(); }
        function checkSSHStatus() { manager.checkSSHStatus(); }
        function saveGames() { manager.saveGames(); }
        function restoreGames() { manager.restoreGames(); }
        function checkGamesStatus() { manager.checkGamesStatus(); }
        function addLibrary() { manager.addLibrary(); }
        function listLibraries() { manager.listLibraries(); }
        function enableExternalGPU() { manager.enableExternalGPU(); }
        function disableExternalGPU() { manager.disableExternalGPU(); }
        function checkGPUStatus() { manager.checkGPUStatus(); }
        function switchToGameMode() { manager.switchToGameMode(); }
        function switchToDesktop() { manager.switchToDesktop(); }
        function checkCurrentMode() { manager.checkCurrentMode(); }
        function clearLogs() { manager.clearLogs(); }
        function exportLogs() { manager.exportLogs(); }
        function saveSettings() { manager.saveSettings(); }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            manager = new SteamDeckManager();
        });
    </script>
</body>
</html>
